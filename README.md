# Lean4 n次元アフィン空間内のチェバの定理とその逆の証明

## 研究概要

### 目的
mathlibライブラリの拡充

### 背景と動機

近年AIの普及は凄まじいものである。つい半年ほど前は、巷で「AIは数学ができない」と言われていたが、今では国際数学オリンピック(IMO)の問題を解かせると金メダル閾値相当の出力をするほどになった。初めはただの言語モデルだったが、推論モデル、計算ツールとのAPI連携、学習データの増加により現在もその性能は伸び続けている。

従来のLLMは自然言語だけで推論し、もっともらしいがハルシネーションを含むことがある。

定理証明器（Lean等）を統合した手法では、自然言語の解法案を（全部または部分的に）形式化して検証し、失敗時はフィードバックで修正するループを回せる。

これにより、形式検証が及ぶ部分についてはハルシネーションを大幅に減らせる。(ただし、問題文の形式化や自然言語への説明生成には依然として誤りが入りうる。)

そこで私はLean4のライブラリを拡充することは、AIの数学力向上に確実に寄与できると考えた。

## 研究手順

### 1. 前提知識の解説

2次元のチェバの定理の解説とそれがアフィンな結果であることを説明

- 定理内容の説明
- アフィン性の証明（必要に応じて）

### 2. チェバの定理の一般化とは何か

n次元アフィン空間中へのチェバの定理の一般化には複数通り考えられることの説明

#### 一般化1: 平面の三角形を保ち周囲空間のみ高次元化
2次元の命題をn次元アフィン空間内の2-平面に還元する埋め込み一般化

#### 一般化2: 単体（simplex）版のチェバ
n-単体でのcevian/concurrency条件（行列式・バリセントリック等）

#### 一般化3: 射影幾何・行列式・重心座標など別定式化
実装上の都合も含めて整理

### 3. 本研究で扱うバージョンの解説

その中でmathlibに加えるならどのバージョンがいいかの説明

- **一般化1**: → 評価・選定理由
- **一般化2**: → 評価・選定理由
- **一般化3**: → 評価・選定理由

評価軸：
- 依存最小化
- 既存APIとの整合
- 拡張性
- 証明の見通し
- 将来の定理への波及

### 4. 定理の自然言語証明

定義等を解説し、証明

- 設定と定義（点・直線・比・cevianの定義・共点性predicate等）
- 補題群（比の性質、アフィン結合、重心座標、非退化条件の扱いなど）
- 主定理と証明
- 一般化になっている点の明確化

### 5. Lean翻訳時のライブラリの存在の確認

既存のモジュールが転用できる部分とそうでない部分の区別

- 転用できる部分の列挙
- 転用できない（不足している）部分の特定
- 依存関係と設計上の制約

### 6. 作成する必要があるライブラリの確認

転用できない部分に対して加えるべきライブラリのリストアップ

- 5から自然に炙り出される
- 必要なライブラリを適切にモジュール化
- ソフトウェア的に綺麗な分割が必要

### 7. 各ライブラリの特記事項

一つ一つのモジュールを追加するにあたっての工夫事項や特記事項

- ここは実際Leanで示してみないとわからない
- 多分一番時間かかる
- API、命名、simp lemma、非退化条件の表現
- 実装の工夫事項・特記事項

### 8. 定理の形式言語証明

証明全文をLeanに書き換える

- 上記の結果をつなげてカーネルを通ればいい
- 定義のLean化
- 証明のLean化
- 実装上の典型的障害と対処

### 9. 今後の展望

このライブラリを用いて示され得る別定理の紹介

- メネラウスの定理（チェバから直ちに導ける）
- 近縁定理への接続（Desargues、Pascalなど）
- 定理群のテンプレ化
- 高次元へのロードマップ

## ファイル構成

```
LeanResearch/
├── README.md                    # このファイル
├── graduation_paper.tex         # 卒業論文のTeXソース
├── Makefile                     # TeXコンパイル用Makefile
├── compile.sh                   # TeXコンパイル用シェルスクリプト
├── lakefile.lean                # Leanプロジェクト設定
├── lean-toolchain               # Leanバージョン指定
├── LeanResearch.lean            # メインファイル
├── pr-files/                    # 実装ファイル
│   ├── ceva.lean               # チェバの定理
│   ├── ceva_coord.lean         # 座標系での表現
│   └── affine_ratio.lean       # アフィン比
└── build/                       # コンパイル中間ファイル（自動生成）
```

## コンパイル方法

### TeXエンジン

**本プロジェクトではLuaLaTeXを使用します。**

### PDF生成

```bash
# Makefileを使用
make              # または make pdf

# シェルスクリプトを使用
./compile.sh
```

### クリーンアップ

```bash
make clean        # 中間ファイルとbuildディレクトリを削除
```

### 注意事項

- 中間ファイル（.aux, .log, .dviなど）は`build/`ディレクトリに出力されます
- PDFファイルは元のディレクトリに生成されます
- LuaLaTeXが必要です（`lualatex`コマンドが利用可能であること）

## 参考文献

- DeepMind, *We achieved gold medal-level performance on the 2025 IMO*, 2025.
- Reuters, *Google and OpenAI's AI models win milestone gold at global math competition*, 2025.
- D. Castelvecchi, *DeepMind and OpenAI models solve maths problems at level of top students*, Nature, 2025.

## ライセンス

（適宜追加）

